// Импортируем необходимые функции из @reduxjs/toolkit/query/react
// createApi - основная функция для создания API сервиса
// retry - утилита для добавления механизма повторных попыток запросов
import { createApi, retry } from '@reduxjs/toolkit/query/react';

// Импортируем базовую конфигурацию запроса из отдельного файла
// Обычно здесь содержатся настройки для всех запросов, например:
// - базовая URL-ссылка
// - заголовки (headers)
// - токены авторизации
import baseQuery from '../../base-project-query';

// Создаем конфигурацию запросов с возможностью повторной попытки
// maxRetries: 1 означает, что при ошибке запрос будет повторен 1 раз
// Итого запрос может быть выполнен максимум 2 раза (1 попытка + 1 повтор)
export const baseQueryWithRetry = retry(baseQuery, { maxRetries: 1 });

// Определяем API сервис
// Здесь мы настраиваем основные параметры для работы с API
const projectsApi = createApi({
  // Уникальный путь для редуктора в store
  // Все состояния, связанные с API, будут храниться под этим ключом
  reducerPath: 'projectsApi',

  // Базовая конфигурация запросов с поддержкой повторных попыток
  baseQuery: baseQueryWithRetry,

  // Определяем типы тегов для инвальтации (invalidateTags)
  // Это позволяет автоматически обновлять данные при определенных действиях
  tagTypes: ['Projects'],

  // Здесь должны быть определены все эндпоинты API
  // На данном этапе оставляем пустым, так как это базовый шаблон
  endpoints: () => ({}),
});

// Экспортируем созданный API сервис для использования в приложении
export default projectsApi;
